<div class="form-heading">

  <h1> 2016 SVP Chicago Letter of Interest </h1>

  <div class="text">
    <p><b>Completing this Form:</b></p>

    <p>Please enter information directly into the form, using this form as the main body of your Letter of Interest. The boxes will expand to hold your text. You can adjust the page breaks when you have completed the form.</p>

    <p><ul>
      <li>If you find an item confusing, please feel free to contact us.</li>

      <li>Please use bullet points rather than paragraphs. Brevity is helpful to our partners when reviewing proposals.</li>
    </ul></p>
  </div>

  <div class="form">
  <!-- BEGIN ANGULAR -->

  <div ng-app="app">
    <div ng-controller="formsCtrl" ng-init="setup()">
    <form ng-submit="submit(name, email)">
        
        <label> Name: </label>
        <input type="text" ng-model="name">

        <label> Email: </label>
        <input type="text" ng-model="email">

          <!-- CONTACT SECTION -->

          <ol>
            <h3><li>{{ contact_section.name }}</li></h3>
              <div ng-repeat="question in contact_formData">
                <label> {{question.question}}: </label>
                <input type="text" ng-model="question.answer">
              </div>
          

          <!-- OVERVIEW SECTION -->

          
            <h3><li>{{ overview_section.name }}</li></h3>
              <div ng-repeat="question in overview_formData">
                <label> {{question.question}}: </label>
                <input type="text" ng-model="question.answer">
              </div>
          

          <!-- VISION SECTION -->

          
            <h3><li>{{ vision_section.name }}</li></h3>
              <div ng-repeat="question in vision_formData">
                <label> {{question.question}}: </label>
                <input type="text" ng-model="question.answer">
              </div>
          

          <!-- KEY CONCERN SECTION -->

          
            <h3><li>{{ concern_section.name }}</li></h3>
              <div ng-repeat="question in concern_formData">
                <label> {{question.question}}: </label>
                <input type="text" ng-model="question.answer">
              </div>
          

          <!-- CHALLENGE SECTION -->

          
            <h3><li>{{ challenge_section.name }}</li></h3>
              <table class="table">
                <tr>
                  <th>Focus Area</th>
                  <th>Please provide a short description of your top 1-3 challenge(s) in each area that applies</th>
                  <th>Priority Rank</th>
                  <th>2015 FTEs</th>
                  <th>2016 FTEs</th>
                  <th>2017 FTEs</th>
                </tr> 
                <tr ng-repeat="question in challenge_formData">
                  <td><label> {{question.question}}: </label></td>
                  <td>
                    <input type="text" ng-model="question.challenges[0].challenge">
                    <input type="text" ng-model="question.challenges[1].challenge">
                    <input type="text" ng-model="question.challenges[2].challenge">
                  </td>
                  <td>
                    <select name="singleSelect" id="singleSelect" ng-model="question.challenges[0].priority">
                      <option value="">---Please select---</option>
                      <option value="H">High</option>
                      <option value="M">Medium</option>
                      <option value="L">Low</option>
                    </select>
                    <select name="singleSelect" id="singleSelect" ng-model="question.challenges[1].priority">
                      <option value="">---Please select---</option>
                      <option value="H">High</option>
                      <option value="M">Medium</option>
                      <option value="L">Low</option>
                    </select>
                    <select name="singleSelect" id="singleSelect" ng-model="question.challenges[2].priority">
                      <option value="">---Please select---</option>
                      <option value="H">High</option>
                      <option value="M">Medium</option>
                      <option value="L">Low</option>
                    </select>
                  </td>
                  <td><input type="text" ng-model="question.fte_1"></td>
                  <td><input type="text" ng-model="question.fte_2"></td>
                  <td><input type="text" ng-model="question.fte_3"></td>
                </tr>
              </table>
          

          <!-- REFERRAL SECTION -->

        
            <h3><li>{{ referral_section.name }}</li></h3>
              <div ng-repeat="question in referral_formData">
                <label> {{question.question}}: </label>
                <input type="text" ng-model="question.answer">
              </div>
        

          <!-- DEMOGRAPHIC SECTION -->

         
            <h3><li>{{ demographic_section.name }}</li></h3>
              <div ng-repeat="question in demographic_formData">
                <label> {{question.question}}: </label>
                <input type="checkbox" ng-model="question.answer">
              </div>

          <!-- GEOGRAPHIC FOCUS SECTION -->

         
            <h3><li>{{ geographic_section.name }}</li></h3>
              <div ng-repeat="question in geographic_formData">
                <label> {{question.question}}: </label>
                <input type="checkbox" ng-model="question.answer">
              </div>
        
        </ol>

          <input type="submit"></button>
      </form>
    </div>
  </div>

  <!-- END ANGULAR -->

    <%= form_tag '/lois', method: :post do %>

      <div class="input-group">
        <%= label_tag "Your Name:" %>
        <%= text_field_tag :name, @loi.name, class: "form-control" %>
      </div>

      <div class="input-group">
        <%= label_tag "Your E-mail:" %>
        <%= text_field_tag :email, @loi.email, class: "form-control" %>
      </div>


      <ol>
        <% @sections.each do |section| %>
          <h3><li><%= section.name %> </li></h3>
          
          <ul>

            <% if section.name == "Organizational Capacity Challenges" %>
                <table class="table">
                  <tr>
                    <th>Focus Area</th>
                    <th>Please provide a short description of your top 1-3 challenge(s) in each area that applies</th>
                    <th>Priority Rank</th>
                    <th>2015 FTEs</th>
                    <th>2016 FTEs</th>
                    <th>2017 FTEs</th>
                  </tr> 
            <% elsif section.name == "Demographics" %>
                <table class="table">
                  <tr>
                    <th>Sector</th>
                    <th>Mark an “x” if you have programs addressing this sector</th>
                  </tr>
            <% elsif section.name == "Geographic Focus" %>
                <table class="table">
                  <tr>
                    <th>Focus</th>
                    <th>Please select whichever applies (if more than one, pick one based on your main program)</th>
                  </tr>
            <% end %>

            <% @questions.each do |question| %>

              <% if question.section_id == section.id && section.name == "Organizational Capacity Challenges" %>
                
                  <tr>
                    <td><%= label_tag question.question+':' %></td>

                    <td>
                      <div id=<%="question_#{question.id}"%>>
                        <div>
                          <%= text_field_tag "answers[#{question.id}[challenges][]", nil, class: "form-control" %>
                        </div>
                      </div>
                      
                      <a id=<%="#{question.id}"%> class="add_field_button">Add More Fields</a>
                    </td>

                    <td>
                      <div id=<%="priority_#{question.id}"%>>
                        <div>
                          <%= select_tag "answers[#{question.id}[challenges][]", options_for_select(["H", "M", "L"], "H") %>
                        </div>
                      </div>
                    </td>

                    <td><%= text_field_tag "answers[#{question.id}[ftes][]", nil, class: "form-control" %></td>
                    <td><%= text_field_tag "answers[#{question.id}[ftes][]", nil, class: "form-control" %></td>
                    <td><%= text_field_tag "answers[#{question.id}[ftes][]", nil, class: "form-control" %></td>
                  </tr>

                <% elsif question.section_id == section.id && section.name == "Demographics" %>

                  <tr>
                    <td><%= label_tag question.question+':' %></td>
                    <td><%= check_box_tag "answers[#{question.id}]", "yes", false %></td>
                  </tr>

                <% elsif question.section_id == section.id && section.name == "Geographic Focus" %>

                  <tr>
                    <td><%= label_tag question.question+':' %></td>
                    <td><%= check_box_tag "answers[#{question.id}]", "yes", false %></td>
                  </tr>

                <% elsif question.section_id == section.id %>

                  <li><%= label_tag question.question+':' %>
                  <%= text_field_tag "answers[#{question.id}]", nil, class: "form-control" %></li>
                  
                <% end %>
              <% end %>

              <% if section.name == "Organizational Capacity Challenges" %>
                <tr>
                  <td></td>
                  <td></td>
                  <td>TOTAL FTEs</td>
                  <td>2015 total</td>
                  <td>2016 total</td>
                  <td>2017 total</td>
                </tr>
              <% elsif section.name == "Demographics" %>
                </table>
              <% elsif section.name == "Geographic Focus" %>
                </table>
              <% end %>
            </table>
          </ul>
        <% end %>
      </ol>

        <div>
          <%= submit_tag "Send", class: "btn btn-default" %>
        </div>

      <% end %>
  </div>

<div>